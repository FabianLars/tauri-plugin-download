var e=Object.defineProperty,a=(a,t)=>{for(var i in t)e(a,i,{get:t[i],enumerable:!0})};function t(e,a=!1){let t=window.crypto.getRandomValues(new Uint32Array(1))[0],i=`_${t}`;return Object.defineProperty(window,i,{value:t=>(a&&Reflect.deleteProperty(window,i),null==e?void 0:e(t)),writable:!1,configurable:!0}),t}async function i(e,a={}){return new Promise(((i,n)=>{let s=t((e=>{i(e),Reflect.deleteProperty(window,`_${l}`)}),!0),l=t((e=>{n(e),Reflect.deleteProperty(window,`_${s}`)}),!0);window.__TAURI_IPC__({cmd:e,callback:s,error:l,...a})}))}function n(e,a="asset"){let t=encodeURIComponent(e);return navigator.userAgent.includes("Windows")?`https://${a}.localhost/${t}`:`${a}://localhost/${t}`}async function s(e){return i("tauri",e)}a({},{convertFileSrc:()=>n,invoke:()=>i,transformCallback:()=>t});async function l(e,a){return s({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:a}})}async function r(e,a,t){await s({__tauriModule:"Event",message:{cmd:"emit",event:e,windowLabel:a,payload:t}})}async function o(e,a,i){return s({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:a,handler:t(i)}}).then((a=>async()=>l(e,a)))}async function d(e,a,t){return o(e,a,(a=>{t(a),l(e,a.id).catch((()=>{}))}))}a({},{TauriEvent:()=>u,emit:()=>y,listen:()=>c,once:()=>m});var u=(e=>(e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_CREATED="tauri://window-created",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_FILE_DROP="tauri://file-drop",e.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",e.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",e.MENU="tauri://menu",e.CHECK_UPDATE="tauri://update",e.UPDATE_AVAILABLE="tauri://update-available",e.INSTALL_UPDATE="tauri://update-install",e.STATUS_UPDATE="tauri://update-status",e.DOWNLOAD_PROGRESS="tauri://update-download-progress",e))(u||{});async function c(e,a){return o(e,null,a)}async function m(e,a){return d(e,null,a)}async function y(e,a){return r(e,void 0,a)}a({},{CloseRequestedEvent:()=>P,LogicalPosition:()=>p,LogicalSize:()=>h,PhysicalPosition:()=>g,PhysicalSize:()=>_,UserAttentionType:()=>w,WebviewWindow:()=>D,WebviewWindowHandle:()=>v,WindowManager:()=>E,appWindow:()=>M,availableMonitors:()=>I,currentMonitor:()=>z,getAll:()=>W,getCurrent:()=>b,primaryMonitor:()=>T});var h=class{constructor(e,a){this.type="Logical",this.width=e,this.height=a}},_=class{constructor(e,a){this.type="Physical",this.width=e,this.height=a}toLogical(e){return new h(this.width/e,this.height/e)}},p=class{constructor(e,a){this.type="Logical",this.x=e,this.y=a}},g=class{constructor(e,a){this.type="Physical",this.x=e,this.y=a}toLogical(e){return new p(this.x/e,this.y/e)}},w=(e=>(e[e.Critical=1]="Critical",e[e.Informational=2]="Informational",e))(w||{});function b(){return new D(window.__TAURI_METADATA__.__currentWindow.label,{skip:!0})}function W(){return window.__TAURI_METADATA__.__windows.map((e=>new D(e.label,{skip:!0})))}var M,f=["tauri://created","tauri://error"],v=class{constructor(e){this.label=e,this.listeners=Object.create(null)}async listen(e,a){return this._handleTauriEvent(e,a)?Promise.resolve((()=>{let t=this.listeners[e];t.splice(t.indexOf(a),1)})):o(e,this.label,a)}async once(e,a){return this._handleTauriEvent(e,a)?Promise.resolve((()=>{let t=this.listeners[e];t.splice(t.indexOf(a),1)})):d(e,this.label,a)}async emit(e,a){if(f.includes(e)){for(let t of this.listeners[e]||[])t({event:e,id:-1,windowLabel:this.label,payload:a});return Promise.resolve()}return r(e,this.label,a)}_handleTauriEvent(e,a){return!!f.includes(e)&&(e in this.listeners?this.listeners[e].push(a):this.listeners[e]=[a],!0)}},E=class extends v{async scaleFactor(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"scaleFactor"}}}})}async innerPosition(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"innerPosition"}}}}).then((({x:e,y:a})=>new g(e,a)))}async outerPosition(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"outerPosition"}}}}).then((({x:e,y:a})=>new g(e,a)))}async innerSize(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"innerSize"}}}}).then((({width:e,height:a})=>new _(e,a)))}async outerSize(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"outerSize"}}}}).then((({width:e,height:a})=>new _(e,a)))}async isFullscreen(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isFullscreen"}}}})}async isMaximized(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isMaximized"}}}})}async isDecorated(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isDecorated"}}}})}async isResizable(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isResizable"}}}})}async isVisible(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isVisible"}}}})}async theme(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"theme"}}}})}async center(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"center"}}}})}async requestUserAttention(e){let a=null;return e&&(a=1===e?{type:"Critical"}:{type:"Informational"}),s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"requestUserAttention",payload:a}}}})}async setResizable(e){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setResizable",payload:e}}}})}async setTitle(e){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setTitle",payload:e}}}})}async maximize(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"maximize"}}}})}async unmaximize(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"unmaximize"}}}})}async toggleMaximize(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"toggleMaximize"}}}})}async minimize(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"minimize"}}}})}async unminimize(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"unminimize"}}}})}async show(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"show"}}}})}async hide(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"hide"}}}})}async close(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"close"}}}})}async setDecorations(e){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setDecorations",payload:e}}}})}async setAlwaysOnTop(e){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setAlwaysOnTop",payload:e}}}})}async setSize(e){if(!e||"Logical"!==e.type&&"Physical"!==e.type)throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setSize",payload:{type:e.type,data:{width:e.width,height:e.height}}}}}})}async setMinSize(e){if(e&&"Logical"!==e.type&&"Physical"!==e.type)throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMinSize",payload:e?{type:e.type,data:{width:e.width,height:e.height}}:null}}}})}async setMaxSize(e){if(e&&"Logical"!==e.type&&"Physical"!==e.type)throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMaxSize",payload:e?{type:e.type,data:{width:e.width,height:e.height}}:null}}}})}async setPosition(e){if(!e||"Logical"!==e.type&&"Physical"!==e.type)throw new Error("the `position` argument must be either a LogicalPosition or a PhysicalPosition instance");return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setPosition",payload:{type:e.type,data:{x:e.x,y:e.y}}}}}})}async setFullscreen(e){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setFullscreen",payload:e}}}})}async setFocus(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setFocus"}}}})}async setIcon(e){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setIcon",payload:{icon:"string"==typeof e?e:Array.from(e)}}}}})}async setSkipTaskbar(e){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setSkipTaskbar",payload:e}}}})}async setCursorGrab(e){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorGrab",payload:e}}}})}async setCursorVisible(e){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorVisible",payload:e}}}})}async setCursorIcon(e){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorIcon",payload:e}}}})}async setCursorPosition(e){if(!e||"Logical"!==e.type&&"Physical"!==e.type)throw new Error("the `position` argument must be either a LogicalPosition or a PhysicalPosition instance");return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorPosition",payload:{type:e.type,data:{x:e.x,y:e.y}}}}}})}async setIgnoreCursorEvents(e){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setIgnoreCursorEvents",payload:e}}}})}async startDragging(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"startDragging"}}}})}async onResized(e){return this.listen("tauri://resize",e)}async onMoved(e){return this.listen("tauri://move",e)}async onCloseRequested(e){return this.listen("tauri://close-requested",(a=>{let t=new P(a);Promise.resolve(e(t)).then((()=>{if(!t.isPreventDefault())return this.close()}))}))}async onFocusChanged(e){let a=await this.listen("tauri://focus",(a=>{e({...a,payload:!0})})),t=await this.listen("tauri://blur",(a=>{e({...a,payload:!1})}));return()=>{a(),t()}}async onScaleChanged(e){return this.listen("tauri://scale-change",e)}async onMenuClicked(e){return this.listen("tauri://menu",e)}async onFileDropEvent(e){let a=await this.listen("tauri://file-drop",(a=>{e({...a,payload:{type:"drop",paths:a.payload}})})),t=await this.listen("tauri://file-drop-hover",(a=>{e({...a,payload:{type:"hover",paths:a.payload}})})),i=await this.listen("tauri://file-drop-cancelled",(a=>{e({...a,payload:{type:"cancel"}})}));return()=>{a(),t(),i()}}async onThemeChanged(e){return this.listen("tauri://theme-changed",e)}},P=class{constructor(e){this._preventDefault=!1,this.event=e.event,this.windowLabel=e.windowLabel,this.id=e.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}},D=class extends E{constructor(e,a={}){super(e),null!=a&&a.skip||s({__tauriModule:"Window",message:{cmd:"createWebview",data:{options:{label:e,...a}}}}).then((async()=>this.emit("tauri://created"))).catch((async e=>this.emit("tauri://error",e)))}static getByLabel(e){return W().some((a=>a.label===e))?new D(e,{skip:!0}):null}};function A(e){return null===e?null:{name:e.name,scaleFactor:e.scaleFactor,position:new g(e.position.x,e.position.y),size:new _(e.size.width,e.size.height)}}async function z(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"currentMonitor"}}}}).then(A)}async function T(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"primaryMonitor"}}}}).then(A)}async function I(){return s({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"availableMonitors"}}}}).then((e=>e.map(A)))}"__TAURI_METADATA__"in window?M=new D(window.__TAURI_METADATA__.__currentWindow.label,{skip:!0}):(console.warn('Could not find "window.__TAURI_METADATA__". The "appWindow" value will reference the "main" window label.\nNote that this is not an issue if running this frontend on a browser instead of a Tauri window.'),M=new D("main",{skip:!0}));const C=new Map;let L=!1;async function S(e,a,t,n){const s=new Uint32Array(1);window.crypto.getRandomValues(s);const l=s[0];t&&C.set(l,t),await(L?Promise.resolve():M.listen("download://progress",(({payload:e})=>{const a=C.get(e.id);void 0!==a&&a(e.progress,e.total)})).then((()=>{L=!0}))),await i("plugin:download|download",{id:l,url:e,filePath:a,headers:null!=n?n:{}})}export{S as default};
